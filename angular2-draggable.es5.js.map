{"version":3,"file":"angular2-draggable.es5.js","sources":["ts/src/angular2-draggable.ts","ts/src/angular-draggable.module.ts","ts/src/angular-draggable.directive.ts","ts/src/widgets/helper-block.ts","ts/src/models/position.ts"],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport {AngularDraggableModule} from './public_api';\n\nexport {AngularDraggableDirective as Éµa} from './angular-draggable.directive';","import { NgModule } from '@angular/core';\nimport { AngularDraggableDirective } from './angular-draggable.directive';\nexport class AngularDraggableModule { static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  imports: [\n  ],\n  declarations: [\n    AngularDraggableDirective,\n  ],\n  exports: [\n    AngularDraggableDirective,\n  ]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction AngularDraggableModule_tsickle_Closure_declarations() {\n/** @type {?} */\nAngularDraggableModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nAngularDraggableModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import {\n  Directive, ElementRef, Renderer2,\n  Input, Output, OnInit, HostListener,\n  EventEmitter, OnChanges, SimpleChanges, OnDestroy, AfterViewInit\n} from '@angular/core';\n\nimport { Subscription } from 'rxjs/Subscription';\nimport { fromEvent } from 'rxjs/observable/fromEvent';\nimport { IPosition, Position } from './models/position';\nimport { HelperBlock } from './widgets/helper-block';\nexport class AngularDraggableDirective implements OnInit, OnDestroy, OnChanges, AfterViewInit {\nprivate allowDrag = true;\nprivate moving = false;\nprivate orignal: Position = null;\nprivate oldTrans = new Position(0, 0);\nprivate tempTrans = new Position(0, 0);\nprivate currTrans = new Position(0, 0);\nprivate oldZIndex = '';\nprivate _zIndex = '';\nprivate needTransform = false;\nprivate draggingSub: Subscription = null;\n/**\n * Bugfix: iFrames, and context unrelated elements block all events, and are unusable\n * https://github.com/xieziyu/angular2-draggable/issues/84\n */\nprivate _helperBlock: HelperBlock = null;\n\n   started = new EventEmitter<any>();\n   stopped = new EventEmitter<any>();\n   edge = new EventEmitter<any>();\n/**\n * Make the handle HTMLElement draggable\n */\nhandle: HTMLElement;\n/**\n * Set the bounds HTMLElement\n */\nbounds: HTMLElement;\n/**\n * List of allowed out of bounds edges *\n */\noutOfBounds = {\n    top: false,\n    right: false,\n    bottom: false,\n    left: false\n  };\n/**\n * Round the position to nearest grid\n */\ngridSize = 1;\n/**\n * Set z-index when dragging\n */\nzIndexMoving: string;\n/**\n * Set z-index when not dragging\n * @param {?} setting\n * @return {?}\n */\nset zIndex(setting: string) {\n    this.renderer.setStyle(this.el.nativeElement, 'z-index', setting);\n    this._zIndex = setting;\n  }\n/**\n * Whether to limit the element stay in the bounds\n */\ninBounds = false;\n/**\n * Whether the element should use it's previous drag position on a new drag event.\n */\ntrackPosition = true;\n/**\n * Input css scale transform of element so translations are correct\n */\nscale = 1;\n/**\n * Whether to prevent default event\n */\npreventDefaultEvent = false;\n/**\n * Set initial position by offsets\n */\nposition: IPosition = { x: 0, y: 0 };\n/**\n * Lock axis: 'x' or 'y'\n */\nlockAxis: string = null;\n/**\n * Emit position offsets when moving\n */\nmovingOffset = new EventEmitter<IPosition>();\n/**\n * Emit position offsets when put back\n */\nendOffset = new EventEmitter<IPosition>();\n/**\n * @param {?} setting\n * @return {?}\n */\nset ngDraggable(setting: any) {\n    if (setting !== undefined && setting !== null && setting !== '') {\n      this.allowDrag = !!setting;\n\n      let /** @type {?} */ element = this.getDragEl();\n\n      if (this.allowDrag) {\n        this.renderer.addClass(element, 'ng-draggable');\n      } else {\n        this.putBack();\n        this.renderer.removeClass(element, 'ng-draggable');\n      }\n    }\n  }\n/**\n * @param {?} el\n * @param {?} renderer\n */\nconstructor(private el: ElementRef,\nprivate renderer: Renderer2) {\n    this._helperBlock = new HelperBlock(el.nativeElement, renderer);\n  }\n/**\n * @return {?}\n */\nngOnInit() {\n    if (this.allowDrag) {\n      let /** @type {?} */ element = this.getDragEl();\n      this.renderer.addClass(element, 'ng-draggable');\n    }\n    this.resetPosition();\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    this.bounds = null;\n    this.handle = null;\n    this.orignal = null;\n    this.oldTrans = null;\n    this.tempTrans = null;\n    this.currTrans = null;\n    this._helperBlock.dispose();\n    this._helperBlock = null;\n\n    if (this.draggingSub) {\n      this.draggingSub.unsubscribe();\n    }\n  }\n/**\n * @param {?} changes\n * @return {?}\n */\nngOnChanges(changes: SimpleChanges) {\n    if (changes['position'] && !changes['position'].isFirstChange()) {\n      let /** @type {?} */ p = changes['position'].currentValue;\n\n      if (!this.moving) {\n        if (Position.isIPosition(p)) {\n          this.oldTrans.set(p);\n        } else {\n          this.oldTrans.reset();\n        }\n\n        this.transform();\n      } else {\n        this.needTransform = true;\n      }\n    }\n  }\n/**\n * @return {?}\n */\nngAfterViewInit() {\n    if (this.inBounds) {\n      this.boundsCheck();\n      this.oldTrans.add(this.tempTrans);\n      this.tempTrans.reset();\n    }\n  }\n/**\n * @return {?}\n */\nprivate getDragEl() {\n    return this.handle ? this.handle : this.el.nativeElement;\n  }\n/**\n * @return {?}\n */\nresetPosition() {\n    if (Position.isIPosition(this.position)) {\n      this.oldTrans.set(this.position);\n    } else {\n      this.oldTrans.reset();\n    }\n    this.tempTrans.reset();\n    this.transform();\n  }\n/**\n * @param {?} p\n * @return {?}\n */\nprivate moveTo(p: Position) {\n    if (this.orignal) {\n      p.subtract(this.orignal);\n      this.tempTrans.set(p);\n      this.tempTrans.divide(this.scale);\n      this.transform();\n\n      if (this.bounds) {\n        this.edge.emit(this.boundsCheck());\n      }\n\n      this.movingOffset.emit(this.currTrans.value);\n    }\n  }\n/**\n * @return {?}\n */\nprivate transform() {\n    let /** @type {?} */ translateX = this.tempTrans.x + this.oldTrans.x;\n    let /** @type {?} */ translateY = this.tempTrans.y + this.oldTrans.y;\n\n    if (this.lockAxis === 'x') {\n      translateX = this.oldTrans.x;\n      this.tempTrans.x = 0;\n    } else if (this.lockAxis === 'y') {\n      translateY = this.oldTrans.y;\n      this.tempTrans.y = 0;\n    }\n\n    // Snap to grid: by grid size\n    if (this.gridSize > 1) {\n      translateX = Math.round(translateX / this.gridSize) * this.gridSize;\n      translateY = Math.round(translateY / this.gridSize) * this.gridSize;\n    }\n\n    let /** @type {?} */ value = `translate(${Math.round(translateX)}px, ${Math.round(translateY)}px)`;\n\n    this.renderer.setStyle(this.el.nativeElement, 'transform', value);\n    this.renderer.setStyle(this.el.nativeElement, '-webkit-transform', value);\n    this.renderer.setStyle(this.el.nativeElement, '-ms-transform', value);\n    this.renderer.setStyle(this.el.nativeElement, '-moz-transform', value);\n    this.renderer.setStyle(this.el.nativeElement, '-o-transform', value);\n\n    // save current position\n    this.currTrans.x = translateX;\n    this.currTrans.y = translateY;\n  }\n/**\n * @return {?}\n */\nprivate pickUp() {\n    // get old z-index:\n    this.oldZIndex = this.el.nativeElement.style.zIndex ? this.el.nativeElement.style.zIndex : '';\n\n    if (window) {\n      this.oldZIndex = window.getComputedStyle(this.el.nativeElement, null).getPropertyValue('z-index');\n    }\n\n    if (this.zIndexMoving) {\n      this.renderer.setStyle(this.el.nativeElement, 'z-index', this.zIndexMoving);\n    }\n\n    if (!this.moving) {\n      this.started.emit(this.el.nativeElement);\n      this.moving = true;\n\n      const /** @type {?} */ element = this.getDragEl();\n      this.renderer.addClass(element, 'ng-dragging');\n\n      /**\n       * Fix performance issue:\n       * https://github.com/xieziyu/angular2-draggable/issues/112\n       */\n      this.subscribeEvents();\n    }\n  }\n/**\n * @return {?}\n */\nprivate subscribeEvents() {\n    this.draggingSub = fromEvent(document, 'mousemove', { passive: false }).subscribe(event => this.onMouseMove( /** @type {?} */((event as MouseEvent))));\n    this.draggingSub.add(fromEvent(document, 'touchmove', { passive: false }).subscribe(event => this.onMouseMove( /** @type {?} */((event as TouchEvent)))));\n    this.draggingSub.add(fromEvent(document, 'mouseup', { passive: false }).subscribe(() => this.putBack()));\n    // checking if browser is IE or Edge - https://github.com/xieziyu/angular2-draggable/issues/153\n    let /** @type {?} */ isIEOrEdge = /msie\\s|trident\\//i.test(window.navigator.userAgent);\n    if (!isIEOrEdge) {\n      this.draggingSub.add(fromEvent(document, 'mouseleave', { passive: false }).subscribe(() => this.putBack()));\n    }\n    this.draggingSub.add(fromEvent(document, 'touchend', { passive: false }).subscribe(() => this.putBack()));\n    this.draggingSub.add(fromEvent(document, 'touchcancel', { passive: false }).subscribe(() => this.putBack()));\n  }\n/**\n * @return {?}\n */\nprivate unsubscribeEvents() {\n    this.draggingSub.unsubscribe();\n    this.draggingSub = null;\n  }\n/**\n * @return {?}\n */\nboundsCheck() {\n    if (this.bounds) {\n      let /** @type {?} */ boundary = this.bounds.getBoundingClientRect();\n      let /** @type {?} */ elem = this.el.nativeElement.getBoundingClientRect();\n      let /** @type {?} */ result = {\n        'top': this.outOfBounds.top ? true : boundary.top < elem.top,\n        'right': this.outOfBounds.right ? true : boundary.right > elem.right,\n        'bottom': this.outOfBounds.bottom ? true : boundary.bottom > elem.bottom,\n        'left': this.outOfBounds.left ? true : boundary.left < elem.left\n      };\n\n      if (this.inBounds) {\n        if (!result.top) {\n          this.tempTrans.y -= (elem.top - boundary.top) / this.scale;\n        }\n\n        if (!result.bottom) {\n          this.tempTrans.y -= (elem.bottom - boundary.bottom) / this.scale;\n        }\n\n        if (!result.right) {\n          this.tempTrans.x -= (elem.right - boundary.right) / this.scale;\n        }\n\n        if (!result.left) {\n          this.tempTrans.x -= (elem.left - boundary.left) / this.scale;\n        }\n\n        this.transform();\n      }\n\n      return result;\n    }\n  }\n/**\n * Get current offset\n * @return {?}\n */\ngetCurrentOffset() {\n    return this.currTrans.value;\n  }\n/**\n * @return {?}\n */\nprivate putBack() {\n    if (this._zIndex) {\n      this.renderer.setStyle(this.el.nativeElement, 'z-index', this._zIndex);\n    } else if (this.zIndexMoving) {\n      if (this.oldZIndex) {\n        this.renderer.setStyle(this.el.nativeElement, 'z-index', this.oldZIndex);\n      } else {\n        this.el.nativeElement.style.removeProperty('z-index');\n      }\n    }\n\n    if (this.moving) {\n      this.stopped.emit(this.el.nativeElement);\n\n      // Remove the helper div:\n      this._helperBlock.remove();\n\n      if (this.needTransform) {\n        if (Position.isIPosition(this.position)) {\n          this.oldTrans.set(this.position);\n        } else {\n          this.oldTrans.reset();\n        }\n\n        this.transform();\n        this.needTransform = false;\n      }\n\n      if (this.bounds) {\n        this.edge.emit(this.boundsCheck());\n      }\n\n      this.moving = false;\n      this.endOffset.emit(this.currTrans.value);\n\n      if (this.trackPosition) {\n        this.oldTrans.add(this.tempTrans);\n      }\n\n      this.tempTrans.reset();\n\n      if (!this.trackPosition) {\n        this.transform();\n      }\n\n      const /** @type {?} */ element = this.getDragEl();\n      this.renderer.removeClass(element, 'ng-dragging');\n\n      /**\n       * Fix performance issue:\n       * https://github.com/xieziyu/angular2-draggable/issues/112\n       */\n      this.unsubscribeEvents();\n    }\n  }\n/**\n * @param {?} target\n * @param {?} element\n * @return {?}\n */\ncheckHandleTarget(target: EventTarget, element: Element) {\n    // Checks if the target is the element clicked, then checks each child element of element as well\n    // Ignores button clicks\n\n    // Ignore elements of type button\n    if (element.tagName === 'BUTTON') {\n      return false;\n    }\n\n    // If the target was found, return true (handle was found)\n    if (element === target) {\n      return true;\n    }\n\n    // Recursively iterate this elements children\n    for (let /** @type {?} */ child in element.children) {\n      if (element.children.hasOwnProperty(child)) {\n        if (this.checkHandleTarget(target, element.children[child])) {\n          return true;\n        }\n      }\n    }\n\n    // Handle was not found in this lineage\n    // Note: return false is ignore unless it is the parent element\n    return false;\n  }\n/**\n * @param {?} event\n * @return {?}\n */\nonMouseDown(event: MouseEvent | TouchEvent) {\n    // 1. skip right click;\n    if (event instanceof MouseEvent && event.button === 2) {\n      return;\n    }\n    // 2. if handle is set, the element can only be moved by handle\n    let /** @type {?} */ target = event.target || event.srcElement;\n    if (this.handle !== undefined && !this.checkHandleTarget(target, this.handle)) {\n      return;\n    }\n\n    // 3. if allow drag is set to false, ignore the mousedown\n    if (this.allowDrag === false) {\n      return;\n    }\n\n    if (this.preventDefaultEvent) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n\n    this.orignal = Position.fromEvent(event, this.getDragEl());\n    this.pickUp();\n  }\n/**\n * @param {?} event\n * @return {?}\n */\nonMouseMove(event: MouseEvent | TouchEvent) {\n    if (this.moving && this.allowDrag) {\n      if (this.preventDefaultEvent) {\n        event.stopPropagation();\n        event.preventDefault();\n      }\n\n      // Add a transparent helper div:\n      this._helperBlock.add();\n      this.moveTo(Position.fromEvent(event, this.getDragEl()));\n    }\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: '[ngDraggable]',\n  exportAs: 'ngDraggable'\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer2, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'started': [{ type: Output },],\n'stopped': [{ type: Output },],\n'edge': [{ type: Output },],\n'handle': [{ type: Input },],\n'bounds': [{ type: Input },],\n'outOfBounds': [{ type: Input },],\n'gridSize': [{ type: Input },],\n'zIndexMoving': [{ type: Input },],\n'zIndex': [{ type: Input },],\n'inBounds': [{ type: Input },],\n'trackPosition': [{ type: Input },],\n'scale': [{ type: Input },],\n'preventDefaultEvent': [{ type: Input },],\n'position': [{ type: Input },],\n'lockAxis': [{ type: Input },],\n'movingOffset': [{ type: Output },],\n'endOffset': [{ type: Output },],\n'ngDraggable': [{ type: Input },],\n'onMouseDown': [{ type: HostListener, args: ['mousedown', ['$event'], ] },{ type: HostListener, args: ['touchstart', ['$event'], ] },],\n};\n}\n\nfunction AngularDraggableDirective_tsickle_Closure_declarations() {\n/** @type {?} */\nAngularDraggableDirective.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nAngularDraggableDirective.ctorParameters;\n/** @type {?} */\nAngularDraggableDirective.propDecorators;\n/** @type {?} */\nAngularDraggableDirective.prototype.allowDrag;\n/** @type {?} */\nAngularDraggableDirective.prototype.moving;\n/** @type {?} */\nAngularDraggableDirective.prototype.orignal;\n/** @type {?} */\nAngularDraggableDirective.prototype.oldTrans;\n/** @type {?} */\nAngularDraggableDirective.prototype.tempTrans;\n/** @type {?} */\nAngularDraggableDirective.prototype.currTrans;\n/** @type {?} */\nAngularDraggableDirective.prototype.oldZIndex;\n/** @type {?} */\nAngularDraggableDirective.prototype._zIndex;\n/** @type {?} */\nAngularDraggableDirective.prototype.needTransform;\n/** @type {?} */\nAngularDraggableDirective.prototype.draggingSub;\n/**\n * Bugfix: iFrames, and context unrelated elements block all events, and are unusable\n * https://github.com/xieziyu/angular2-draggable/issues/84\n * @type {?}\n */\nAngularDraggableDirective.prototype._helperBlock;\n/** @type {?} */\nAngularDraggableDirective.prototype.started;\n/** @type {?} */\nAngularDraggableDirective.prototype.stopped;\n/** @type {?} */\nAngularDraggableDirective.prototype.edge;\n/**\n * Make the handle HTMLElement draggable\n * @type {?}\n */\nAngularDraggableDirective.prototype.handle;\n/**\n * Set the bounds HTMLElement\n * @type {?}\n */\nAngularDraggableDirective.prototype.bounds;\n/**\n * List of allowed out of bounds edges *\n * @type {?}\n */\nAngularDraggableDirective.prototype.outOfBounds;\n/**\n * Round the position to nearest grid\n * @type {?}\n */\nAngularDraggableDirective.prototype.gridSize;\n/**\n * Set z-index when dragging\n * @type {?}\n */\nAngularDraggableDirective.prototype.zIndexMoving;\n/**\n * Whether to limit the element stay in the bounds\n * @type {?}\n */\nAngularDraggableDirective.prototype.inBounds;\n/**\n * Whether the element should use it's previous drag position on a new drag event.\n * @type {?}\n */\nAngularDraggableDirective.prototype.trackPosition;\n/**\n * Input css scale transform of element so translations are correct\n * @type {?}\n */\nAngularDraggableDirective.prototype.scale;\n/**\n * Whether to prevent default event\n * @type {?}\n */\nAngularDraggableDirective.prototype.preventDefaultEvent;\n/**\n * Set initial position by offsets\n * @type {?}\n */\nAngularDraggableDirective.prototype.position;\n/**\n * Lock axis: 'x' or 'y'\n * @type {?}\n */\nAngularDraggableDirective.prototype.lockAxis;\n/**\n * Emit position offsets when moving\n * @type {?}\n */\nAngularDraggableDirective.prototype.movingOffset;\n/**\n * Emit position offsets when put back\n * @type {?}\n */\nAngularDraggableDirective.prototype.endOffset;\n/** @type {?} */\nAngularDraggableDirective.prototype.el;\n/** @type {?} */\nAngularDraggableDirective.prototype.renderer;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Renderer2 } from '@angular/core';\nexport class HelperBlock {\n  protected _helper: Element;\nprivate _added = false;\n/**\n * @param {?} parent\n * @param {?} renderer\n */\nconstructor(\n    protected parent: Element,\n    protected renderer: Renderer2\n  ) {\n    // generate helper div\n    let helper = renderer.createElement('div');\n    renderer.setStyle(helper, 'position', 'absolute');\n    renderer.setStyle(helper, 'width', '100%');\n    renderer.setStyle(helper, 'height', '100%');\n    renderer.setStyle(helper, 'background-color', 'transparent');\n    renderer.setStyle(helper, 'top', '0');\n    renderer.setStyle(helper, 'left', '0');\n\n    // done\n    this._helper = helper;\n  }\n/**\n * @return {?}\n */\nadd() {\n    // append div to parent\n    if (this.parent && !this._added) {\n      this.parent.appendChild(this._helper);\n      this._added = true;\n    }\n  }\n/**\n * @return {?}\n */\nremove() {\n    if (this.parent && this._added) {\n      this.parent.removeChild(this._helper);\n      this._added = false;\n    }\n  }\n/**\n * @return {?}\n */\ndispose() {\n    this._helper = null;\n    this._added = false;\n  }\n/**\n * @return {?}\n */\nget el() {\n    return this._helper;\n  }\n}\n\nfunction HelperBlock_tsickle_Closure_declarations() {\n/** @type {?} */\nHelperBlock.prototype._helper;\n/** @type {?} */\nHelperBlock.prototype._added;\n/** @type {?} */\nHelperBlock.prototype.parent;\n/** @type {?} */\nHelperBlock.prototype.renderer;\n}\n\n","export interface IPosition {\n  x: number;\n  y: number;\n}\nexport class Position implements IPosition {\n/**\n * @param {?} x\n * @param {?} y\n */\nconstructor(public x: number,\npublic y: number) { }\n/**\n * @param {?} e\n * @param {?=} el\n * @return {?}\n */\nstatic fromEvent(e: MouseEvent | TouchEvent, el: any = null) {\n    /**\n     * Fix issue: Resize doesn't work on Windows10 IE11 (and on some windows 7 IE11)\n     * https://github.com/xieziyu/angular2-draggable/issues/164\n     * e instanceof MouseEvent check returns false on IE11\n     */\n    if (this.isMouseEvent(e)) {\n      return new Position(e.clientX, e.clientY);\n    } else {\n      if (el === null || e.changedTouches.length === 1) {\n        return new Position(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n      }\n\n      /**\n       * Fix issue: Multiple phone draggables at the same time\n       * https://github.com/xieziyu/angular2-draggable/issues/128\n       */\n      for (let /** @type {?} */ i = 0; i < e.changedTouches.length; i++) {\n        if (e.changedTouches[i].target === el) {\n          return new Position(e.changedTouches[i].clientX, e.changedTouches[i].clientY);\n        }\n      }\n    }\n  }\n/**\n * @param {?} e\n * @return {?}\n */\nstatic isMouseEvent(e: MouseEvent | TouchEvent): e is MouseEvent {\n    return Object.prototype.toString.apply(e).indexOf('MouseEvent') === 8;\n  }\n/**\n * @param {?} obj\n * @return {?}\n */\nstatic isIPosition(obj): obj is IPosition {\n    return !!obj && ('x' in obj) && ('y' in obj);\n  }\n/**\n * @param {?} el\n * @return {?}\n */\nstatic getCurrent(el: Element) {\n    let /** @type {?} */ pos = new Position(0, 0);\n\n    if (window) {\n      const /** @type {?} */ computed = window.getComputedStyle(el);\n      if (computed) {\n        let /** @type {?} */ x = parseInt(computed.getPropertyValue('left'), 10);\n        let /** @type {?} */ y = parseInt(computed.getPropertyValue('top'), 10);\n        pos.x = isNaN(x) ? 0 : x;\n        pos.y = isNaN(y) ? 0 : y;\n      }\n      return pos;\n    } else {\n      console.error('Not Supported!');\n      return null;\n    }\n  }\n/**\n * @param {?} p\n * @return {?}\n */\nstatic copy(p: IPosition) {\n    return new Position(0, 0).set(p);\n  }\n/**\n * @return {?}\n */\nget value(): IPosition {\n    return { x: this.x, y: this.y };\n  }\n/**\n * @param {?} p\n * @return {?}\n */\nadd(p: IPosition) {\n    this.x += p.x;\n    this.y += p.y;\n    return this;\n  }\n/**\n * @param {?} p\n * @return {?}\n */\nsubtract(p: IPosition) {\n    this.x -= p.x;\n    this.y -= p.y;\n    return this;\n  }\n/**\n * @param {?} n\n * @return {?}\n */\nmultiply(n: number) {\n    this.x *= n;\n    this.y *= n;\n  }\n/**\n * @param {?} n\n * @return {?}\n */\ndivide(n: number) {\n    this.x /= n;\n    this.y /= n;\n  }\n/**\n * @return {?}\n */\nreset() {\n    this.x = 0;\n    this.y = 0;\n    return this;\n  }\n/**\n * @param {?} p\n * @return {?}\n */\nset(p: IPosition) {\n    this.x = p.x;\n    this.y = p.y;\n    return this;\n  }\n}\n\nfunction Position_tsickle_Closure_declarations() {\n/** @type {?} */\nPosition.prototype.x;\n/** @type {?} */\nPosition.prototype.y;\n}\n\n"],"names":["fromEvent"],"mappings":"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"}
